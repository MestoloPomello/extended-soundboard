<div id="search-bar">
    <div id="search">
        <input type="text" placeholder="Cerca audio..." />
    </div>
    <div class="controls-group">
        <div class="sort-container">
            <i class="fas fa-sort"></i>
            <select id="sort-select" onchange="changeSortOrder(this.value)">
                <option value="name" {{#if (eq currentSort "name" )}}selected{{/if}}>Nome (A-Z)</option>
                <option value="date" {{#if (eq currentSort "date" )}}selected{{/if}}>Data creazione</option>
            </select>
        </div>
        <div id="group-toggle-container">
            <label>
                <input type="checkbox" id="group-toggle" {{#if groupByAuthor}}checked{{/if}} onchange="toggleGrouping(this.checked)">
                <span>Raggruppa in sezioni</span>
            </label>
        </div>
        <a href="#" class="btn-admin" onclick="goToAdmin(event)">
            <i class="fas fa-cog"></i> Admin
        </a>
    </div>
</div>

{{#if groupByAuthor}}
    {{#each sections}}
        <div class="author-section collapsed" data-author="{{this.author}}">
            <div class="author-header" onclick="toggleSection(this)">
                <h2 class="author-name">{{this.author}} <span class="author-count">({{this.count}})</span></h2>
                <i class="fas fa-chevron-up collapse-icon"></i>
            </div>
            <div class="section-content">
                <div class="audio-list">
                    {{#each this.files}}
                    <button data-search="{{this.formattedName}}" data-authors="{{#if this.authors}}{{#each this.authors}}{{this}} {{/each}}{{/if}}" class="audio-item" onclick="playSound(`{{this.name}}`)">
                        <span class="audio-name">{{this.formattedName}}</span>
                    </button>
                    {{/each}}
                </div>
            </div>
        </div>
    {{/each}}
{{else}}
    <div class="audio-list">
        {{#each audioFiles}}
        <button data-search="{{this.fullName}}" class="audio-item" onclick="playSound(`{{this.name}}`)">
            <span class="audio-name">{{this.fullName}}</span>
        </button>
        {{/each}}
    </div>
{{/if}}

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/js/all.min.js"></script>
<script src="https://code.jquery.com/jquery-3.7.1.min.js"
    integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.matchHeight/0.7.2/jquery.matchHeight-min.js"
    integrity="sha512-/bOVV1DV1AQXcypckRwsR9ThoCj7FqTV2/0Bm79bL3YSyLkVideFLE3MIZkq1u5t28ke1c0n31WYCOrO01dsUg=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="js/main.js"></script>